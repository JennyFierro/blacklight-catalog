<%# Override of Blacklight v7.4.1 partial of same name; inserts vernacular title helper before the dl L#4 %>
<% doc_presenter = index_presenter(document) %>
<% doc_avail_values = @documents_availability[document.id] if @documents_availability.present? %>
<% service_page_link = service_page_url(document.id) %>
<%# default partial to display solr document fields in catalog index view -%>
<%= vern_title_search_results_populator(document) %>
<dl class="document-metadata dl-invert row">

  <% doc_presenter.fields_to_render.each do |field_name, field| -%>
    <dt class="blacklight-<%= field_name.parameterize %> col-md-3"><%= render_index_field_label document, field: field_name %></dt>
    <dd class="blacklight-<%= field_name.parameterize %> col-md-9"><%= doc_presenter.field_value field %></dd>
  <% end -%>
  <dt class="avail-label blacklight-access-availability-<%= document.id %> col-md-3">Access & Availability:</dt>
  <dd class="avail-dd blacklight-access-availability-<%= document.id %> col-md-9">
    <% if doc_avail_values.present? %>
      <%= render_physical_avail_spans(doc_avail_values, service_page_link) %>
      <%= tag('br') if doc_avail_values[:physical_exists] && (doc_avail_values[:online_available] || document.url_fulltext.present?) %>
      <% if doc_avail_values[:online_available] || document.url_fulltext.present? %>
        <span class="btn rounded-0 mb-2 online-avail-label avail-default">Online</span>
        <% if !doc_avail_values[:online_available] %>
          <%= render_online_link_span(document.id) %>
          <%= render 'document_url_fulltext_modal', document: document %>
        <% else %>
          <span class="online-avail-button">
            <%= link_to "CONNECT", service_page_link, target: "_blank", class: "btn btn-md rounded-0 mb-2 btn-outline-primary avail-link-el" %>
          </span>
        <% end %>
      <% end %>
    <% end %>
  </dd>
</dl>
